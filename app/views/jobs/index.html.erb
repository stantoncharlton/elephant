<% provide(:title, I18n.t("jobs.index.title")) %>

<div class="page_header">

  <h1><%= t ".title" %></h1>

  <h2>
    <% if @is_paged %>
        <%= ((Integer(params[:page]) - 1) * 20) + 1 %>
        - <%= [((Integer(params[:page]) - 1) * 20) + 20, @jobs.count].min %> of <%= @jobs.count.to_s %>
    <% else %>
        1 - <%= @jobs.count %> of <%= @jobs.count %>
    <% end %>
  </h2>

  <%= link_to "+ " + I18n.t("jobs.index.new"), new_job_path, class: "bluebtn pull-right tooltip-info",
              "data-placement" => "bottom",
              "data-title" => "Create new job" %>

</div>

<% if !@is_paged %>
    <% if current_user.role.no_assigned_jobs? %>
        <div class="well">
          <%= render 'jobs/index_parts/jobs_count', jobs: current_user.company.jobs %>
        </div>
        <br>

        <div class="">
          <%= render 'jobs/index_parts/divisions' %>
        </div>
    <% else %>
        <div class="well">
          <%= render 'jobs/index_parts/jobs_count', jobs: @jobs %>
        </div>
        <br>
    <% end %>
<% end %>

<% if current_user.role.no_assigned_jobs? || @is_paged %>
    <div id="jobs" class="list">
      <% @jobs.each do |job| %>
          <%= render 'jobs/job_progress_link', job: job %>
      <% end %>
    </div>
<% else %>
    <div id="jobs" class="list">
      <%= render @jobs %>
    </div>
<% end %>

<% if @is_paged %>
    <%= will_paginate %>
<% else %>
    <br>
    <% if @jobs.empty? %>
        <% if !current_user.role.no_assigned_jobs? %>
            <div class="no-alerts">
              <p class="center"><%= t ".no_jobs" %></p>
            </div>
        <% end %>
    <% else %>
        <div class="alert">
          <%= link_to "View all jobs active and closed (" + @jobs.count.to_s + ")", jobs_path(:page => "1"), class: "activity-user-link" %>
        </div>
    <% end %>
<% end %>



