popup = $('#modal_popup');
popup.css('visibility', 'hidden');
popup.find(".modal-content").children().remove();
popup.height(0);

if ($('#map').length > 0) {
    $('#map').show();
}

if($("#shipment_<%= @shipment.id %>").length > 0) {
    $("#shipment_<%= @shipment.id %>").replaceWith("<%= j render 'shipments/shipment', shipment: @shipment, editable: @shipment.from_editable %>");
    $("#shipment_<%= @shipment.id %>").find('.popover').popover({  delay: { show: 100, hide: 200 } });
}

if($('#no_outbound_shipments').length > 0) {
    $('#no_outbound_shipments').remove();
    $('#shipments_list').css('margin-top', '20px');
}

$('#deselect_all').click(function() {
    $('.shipment_checkbox').each(function() {
        $(this).prop('checked', false);
        $(this).next().css('opacity', '0.3');
    });
    $('#deselect_all').addClass('hidden');
    $('#select_all').removeClass('hidden');
    return false;
});

$('#select_all').click(function() {
    $('.shipment_checkbox').each(function() {
        $(this).prop('checked', true);
        $(this).next().css('opacity', '1.0');
    });
    $('#deselect_all').removeClass('hidden');
    $('#select_all').addClass('hidden');
    return false;
});

$('.shipment_checkbox').change(function() {
    if($(this).is(":checked")) {
        $(this).next().css('opacity', '1.0');
    }
    else {
        $(this).next().css('opacity', '0.3');
    }
});
