function removeOldContent(section) {
    $('.remote-tray').each(function() {
        if($(this).hasClass('custom-data-closed')) {
            $(this).find('.tray-content').remove();
        }
    });
}

removeOldContent('<%= params[:section] %>');

tray = $(".remote-tray[data-tray='<%= params[:section] %>']");

<% if params[:section] == "drilling-overview" %>
    tray.replaceWith("<%= j render 'drilling_logs/tray_overview', drilling_log: @drilling_log %>");

    <% if @drilling_log.job.status == Job::ON_JOB %>
        setTimeout(function() {
            $.ajax('/drilling_logs/' + <%= @drilling_log.id %> + "?section=drilling-overview", {
                type: 'get',
                dataType: 'script'
            });
        }, 1000 * 60 * 5);
    <% end %>

<% elsif params[:section] == "log" %>
    tray.replaceWith("<%= j render 'drilling_logs/tray_log', drilling_log: @drilling_log %>");
    $('#drilling_log_filter').trigger("change");
    $('.custom-select').customSelect();
    $('.date-picker').datepicker();
<% elsif params[:section] == "drilling-rop" %>
    tray.replaceWith("<%= j render 'drilling_logs/tray_rop', drilling_log: @drilling_log %>");
<% elsif params[:section] == "drilling-runs" %>
    tray.replaceWith("<%= j render 'drilling_logs/tray_runs', drilling_log: @drilling_log %>");
<% elsif params[:section] == "drilling-daily" %>
    tray.replaceWith("<%= j render 'drilling_logs/tray_daily', drilling_log: @drilling_log %>");
<% elsif params[:section] == "drilling-bha" %>
    tray.replaceWith("<%= j render 'drilling_logs/tray_bha', drilling_log: @drilling_log %>");
<% elsif params[:section] == "drilling-npt" %>
    tray.replaceWith("<%= j render 'drilling_logs/tray_npt', drilling_log: @drilling_log %>");
<% elsif params[:section] == "drilling-reports" %>
    tray.replaceWith("<%= j render 'drilling_logs/tray_reports', drilling_log: @drilling_log %>");
<% end %>

if (!window.matchMedia || !window.matchMedia("(max-device-width: 1024px)").matches) {
    $('.tooltip-info').tooltip();
}

$('.custom-select-ajax').customSelect();