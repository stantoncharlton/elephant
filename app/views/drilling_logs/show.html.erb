<% provide(:title, @drilling_log.document.name) %>

<% if true %>
    <div class="page_header page-header-no-line">
      <h1 id="part_name">Drilling</h1>

      <div class="push-right btn-group inline pull-right push-down">
        <a class="custom-data-toggle-jobs" data-toggle="dropdown" href="#">
          Advanced/Sharing
        </a>
        <ul class="dropdown-menu">
          <li>
            <%= link_to "Export as Excel", document_path(@drilling_log.document, format: "xlsx"),
                        target: "_blank",
                        class: "dropdown-menu-link tooltip-info submit-form",
                        "data-placement" => "left",
                        "data-title" => "Export log as Microsoft Excel file." %>
          </li>
        </ul>
      </div>

      <div class='pull-right'>
        <%= render 'jobs/job_multi_link', job: @drilling_log.job %>
      </div>
    </div>

<% else %>
    <%= render 'jobs/job_data_header', job: @drilling_log.job %>
    <br>
<% end %>


<ul class="nav nav-pills alert alert-nav">
  <li class="active">
    <a href="#" class="remote-tray-toggle custom-data-toggle"
       data-id="<%= @drilling_log.id %>"
       data-tray-controller="drilling_logs"
       data-tray="drilling-overview">Overview</a>
  </li>

  <li class="">
    <a href="#" class="remote-tray-toggle custom-data-toggle"
       data-id="<%= @drilling_log.id %>"
       data-tray-controller="drilling_logs"
       data-tray="drilling-rop">ROP</a>
  </li>


  <li class="">
    <a href="#" class="remote-tray-toggle custom-data-toggle"
       data-id="<%= @drilling_log.id %>"
       data-tray-controller="drilling_logs"
       data-tray="drilling-runs">Runs</a>
  </li>

      <li class="">
        <a href="#" class="remote-tray-toggle custom-data-toggle"
           data-id="<%= @drilling_log.id %>"
           data-tray-controller="drilling_logs"
           data-tray="drilling-daily">Days</a>
      </li>

  <li class="">
    <a href="#" class="remote-tray-toggle custom-data-toggle"
       data-id="<%= @drilling_log.id %>"
       data-tray-controller="drilling_logs"
       data-tray="drilling-bha">BHAs</a>
  </li>

  <li class="">
    <a href="#" class="remote-tray-toggle custom-data-toggle"
       data-id="<%= @drilling_log.id %>"
       data-tray-controller="drilling_logs"
       data-tray="drilling-npt">Time</a>
  </li>

  <li class="">
    <a href="#" class="remote-tray-toggle custom-data-toggle"
       data-id="<%= @drilling_log.id %>"
       data-tray-controller="drilling_logs"
       data-tray="log">Log</a>
  </li>

  <li class="">
    <a href="#" class="remote-tray-toggle custom-data-toggle"
       data-id="<%= @drilling_log.id %>"
       data-tray-controller="drilling_logs"
       data-tray="survey">Survey</a>
  </li>

  <li class="">
    <a href="#" class="remote-tray-toggle custom-data-toggle"
       data-id="<%= @drilling_log.id %>"
       data-tray-controller="drilling_logs"
       data-tray="drilling-reports">Reports</a>
  </li>
</ul>



<div class="remote-tray" data-tray="drilling-overview">
  <div class="remote-loading">
    <%= render 'layouts/inline_loading', title: "Please wait, loading overview..." %>
  </div>
</div>

<div class="remote-tray custom-data-closed" data-tray="drilling-rop">
  <div class="remote-loading">
    <%= render 'layouts/inline_loading', title: "Please wait, loading ROP Analysis..." %>
  </div>
</div>

<div class="remote-tray custom-data-closed" data-tray="drilling-runs">
  <div class="remote-loading">
    <%= render 'layouts/inline_loading', title: "Please wait, loading runs..." %>
  </div>
</div>

<div class="remote-tray custom-data-closed" data-tray="drilling-daily">
  <div class="remote-loading">
    <%= render 'layouts/inline_loading', title: "Please wait, loading daily totals..." %>
  </div>
</div>

<div class="remote-tray custom-data-closed" data-tray="drilling-npt">
  <div class="remote-loading">
    <%= render 'layouts/inline_loading', title: "Please wait, loading NPT..." %>
  </div>
</div>

<div class="remote-tray custom-data-closed" data-tray="drilling-bha">
  <div class="remote-loading">
    <%= render 'layouts/inline_loading', title: "Please wait, loading BHA totals..." %>
  </div>
</div>

<div class="remote-tray custom-data-closed" data-tray="log">
  <div class="remote-loading">
    <%= render 'layouts/inline_loading', title: "Please wait, loading logs..." %>
  </div>
</div>

<div class="remote-tray custom-data-closed" data-tray="survey">
  <div class="remote-loading">
    <%= render 'layouts/inline_loading', title: "Please wait, loading survey..." %>
  </div>
</div>

<div class="remote-tray custom-data-closed" data-tray="drilling-reports">
  <div class="remote-loading">
    <%= render 'layouts/inline_loading', title: "Please wait, loading reports..." %>
  </div>
</div>

<div id="modal_popup" class="modal-popup-background">
  <div class="modal-popup modal-popup-fixed">
    <%= link_to "close", "#", class: "delete-button modal-popup-close", id: "close_modal" %>
    <div class="modal-content">
    </div>
    <%= render "layouts/inline_loading", title: "Loading..." %>
  </div>
</div>

<script type='text/javascript'>
    if (document.location.hash == '') {
        tray = $(".remote-tray[data-tray='drilling-overview']");
        tray.find('.content').hide();
        tray.find('.remote-loading').removeClass('hidden');
        tray.find('.loading').removeClass('hidden');
        setTimeout(function () {
            $.ajax({
                url: "/drilling_logs/<%= @drilling_log.id %>?section=drilling-overview",
                type: "GET",
                dataType: "script"
            });
        }, 1);
    }
</script>


